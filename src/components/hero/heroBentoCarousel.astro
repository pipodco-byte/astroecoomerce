---
interface Slide {
  label: string;
  title: string;
  subtitle: string;
  description: string;
  buttonText: string;
  buttonLink: string;
  backgroundImage: string;
}

interface Props {
  slides?: Slide[];
}

const defaultSlides: Slide[] = [
  {
    label: "EXPERTOS APPLE",
    title: "SERVICIO TÉCNICO",
    subtitle: "ESPECIALIZADO",
    description: "Diagnóstico preciso y repuestos originales en Bogotá.",
    buttonText: "Agendar Cita →",
    buttonLink: "#",
    backgroundImage: "/images/appleblack.jpg"
  },
  {
    label: "PROMO MÓVIL",
    title: "REPARACIÓN",
    subtitle: "EXPRESS",
    description: "Mismo día para pantallas y baterías.",
    buttonText: "Solicitar →",
    buttonLink: "#",
    backgroundImage: "/images/promo phone.jpg"
  },
  {
    label: "PROMO ESPECIAL",
    title: "OFERTAS",
    subtitle: "EXCLUSIVAS",
    description: "Descubre nuestras mejores promociones.",
    buttonText: "Ver Más →",
    buttonLink: "#",
    backgroundImage: "/images/nueva2.jpg"
  }
];

const { slides = defaultSlides } = Astro.props as Props;
---

<section id="bento-hero-section" class="py-4" style="background-color: #FFFFFF;">
  <div class="container">
    <div class="row g-3">
      
      <div class="col-lg-4 d-flex flex-column gap-3">
        <div class="p-4 d-flex flex-column justify-content-between shadow-sm bento-card-side" 
             style="background-image: url('/images/appleblack.jpg');">
          <div>
            <span class="label-mono">DIAGNÓSTICO EXPERTO</span>
            <h3 class="title-side">SERVICIO TÉCNICO</h3>
          </div>
          <a href="#" class="btn-side">AGENDAR →</a>
        </div>

        <div class="p-4 d-flex flex-column justify-content-between shadow-sm bento-card-side" 
             style="background-image: url('/images/accesorios phone.jpg'); background-position: center 30%;">
          <div>
            <span class="label-mono" style="color: #000;">ORIGINAL ONLY</span>
            <h3 class="title-side" style="color: #000;">ACCESORIOS</h3>
          </div>
          <a href="#" class="btn-side dark">IR A TIENDA →</a>
        </div>
      </div>

      <div class="col-lg-8">
        <div id="heroBentoCarousel" class="carousel slide h-100 shadow-sm" data-bs-ride="carousel" style="border-radius: 24px; overflow: hidden; position: relative;">
          
          <div class="carousel-inner h-100">
            {slides.map((slide, index) => (
              <div class={`carousel-item h-100 ${index === 0 ? 'active' : ''}`} 
                   style={`background-image: url('${slide.backgroundImage}'); background-size: cover; background-position: center; min-height: 506px;`}>
                
                <div class="p-5 h-100 d-flex flex-column justify-content-start" 
                     style="background: linear-gradient(to bottom, rgba(0,0,0,0.5) 0%, transparent 50%); position: relative;">
                  
                  <div class="text-start">
                    <span class="slide-label">{slide.label}</span>
                    <h1 class="slide-title">
                      {slide.title} <br> {slide.subtitle}
                    </h1>
                    <p class="slide-desc d-none d-md-block">{slide.description}</p>
                  </div>

                  <div class="cta-anchor">
                    <a href={slide.buttonLink} class="pipod-btn-cta">
                      {slide.buttonText}
                    </a>
                  </div>
                </div>

              </div>
            ))}
          </div>

          <div class="indicators-container">
            <div class="carousel-indicators" style="position: static; margin: 0; display: flex; gap: 10px; border: none;">
              {slides.map((_, index) => (
                <button 
                  type="button" 
                  data-bs-target="#heroBentoCarousel" 
                  data-bs-slide-to={index} 
                  class={index === 0 ? 'active' : ''}
                  aria-current={index === 0 ? "true" : "false"}
                  aria-label={`Slide ${index + 1}`}
                  style="margin: 0; border: none; padding: 0;"
                ></button>
              ))}
            </div>
          </div>
          
        </div>
      </div>

    </div>
  </div>
</section>

<style is:global>
  /* --- TIPOGRAFÍAS --- */
  .label-mono { font-family: 'PT Mono', monospace; font-size: 0.7rem; letter-spacing: 2px; color: #6E6E6E; }
  .title-side { font-family: 'Inter', sans-serif; font-weight: 700; color: #FFF; margin-top: 8px; }
  
  /* --- TARJETAS LATERALES --- */
  .bento-card-side { background-size: cover; background-position: center; border-radius: 24px; min-height: 240px; }
  .btn-side { font-family: 'Inter'; font-weight: 700; font-size: 0.8rem; text-decoration: none; color: #000; background: #FFF; padding: 6px 18px; border-radius: 50px; width: fit-content; transition: all 0.3s ease; }
  .btn-side.dark { background: #000; color: #FFF; }
  .btn-side:hover { transform: scale(1.05); }

  /* --- CAROUSEL TEXTOS (SUPERIOR) --- */
  .slide-label { font-family: 'PT Mono'; font-size: 0.75rem; letter-spacing: 3px; color: #FFF; opacity: 0.9; }
  .slide-title { font-family: 'Inter'; font-size: 2.8rem; font-weight: 800; color: #FFF; line-height: 1.1; margin-top: 10px; text-shadow: 0 4px 10px rgba(0,0,0,0.3); }
  .slide-desc { font-family: 'Noto Sans'; font-size: 1.1rem; color: #FFF; opacity: 0.9; margin-top: 15px; max-width: 500px; }

  /* --- BOTÓN CTA (DERECHA) --- */
  .cta-anchor {
    position: absolute;
    bottom: 40px;
    right: 40px;
    z-index: 10;
  }

  .pipod-btn-cta {
    background: #FFF;
    color: #000;
    border-radius: 50px;
    padding: 14px 35px;
    font-family: 'Inter', sans-serif;
    font-weight: 700;
    font-size: 0.95rem;
    text-decoration: none;
    transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    display: inline-block;
  }

  .pipod-btn-cta:hover {
    transform: scale(1.05) translateY(-3px);
    box-shadow: 0 15px 35px rgba(0,0,0,0.3);
    background: #f8f9fa;
  }

  /* --- INDICADORES ESTILO PÍLDORA --- */
  .indicators-container {
    position: absolute;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10;
  }

  /* Reset de estilos nativos de Bootstrap para indicadores */
  .carousel-indicators button {
    width: 8px !important;
    height: 8px !important;
    border-radius: 50% !important;
    background-color: rgba(255, 255, 255, 0.4) !important;
    opacity: 1 !important;
    border: none !important;
    transition: width 0.4s cubic-bezier(0.16, 1, 0.3, 1), background-color 0.4s ease, border-radius 0.4s ease !important;
  }

  /* Punto Activo -> Píldora */
  .carousel-indicators button.active {
    width: 30px !important;
    background-color: #FFF !important;
    border-radius: 10px !important;
  }

  /* RESPONSIVE */
  @media (max-width: 991px) {
    .slide-title { font-size: 2.1rem; }
    .cta-anchor { right: 20px; bottom: 80px; }
    .pipod-btn-cta { padding: 10px 24px; font-size: 0.85rem; }
  }
</style>